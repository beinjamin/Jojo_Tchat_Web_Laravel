{"version":3,"file":"index.js","sources":["../src/link.js","../src/remember.js","../src/app.js"],"sourcesContent":["import { Inertia, shouldIntercept } from '@inertiajs/inertia'\n\nexport default {\n  functional: true,\n  props: {\n    data: {\n      type: Object,\n      default: () => ({}),\n    },\n    href: {\n      type: String,\n      required: true,\n    },\n    method: {\n      type: String,\n      default: 'get',\n    },\n    replace: {\n      type: Boolean,\n      default: false,\n    },\n    preserveScroll: {\n      type: Boolean,\n      default: false,\n    },\n    preserveState: {\n      type: Boolean,\n      default: false,\n    },\n    only: {\n      type: Array,\n      default: () => [],\n    },\n    headers: {\n      type: Object,\n      default: () => ({}),\n    }\n  },\n  render(h, { props, data, children }) {\n    return h('a', {\n      ...data,\n      attrs: {\n        ...data.attrs,\n        href: props.href,\n      },\n      on: {\n        ...(data.on || {}),\n        click: event => {\n          if (data.on && data.on.click) {\n            data.on.click(event)\n          }\n\n          if (shouldIntercept(event)) {\n            event.preventDefault()\n\n            Inertia.visit(props.href, {\n              data: props.data,\n              method: props.method,\n              replace: props.replace,\n              preserveScroll: props.preserveScroll,\n              preserveState: props.preserveState,\n              only: props.only,\n              headers: props.headers,\n            })\n          }\n        },\n      },\n    }, children)\n  },\n}\n","import { Inertia } from '@inertiajs/inertia'\n\nexport default {\n  created() {\n    if (!this.$options.remember) {\n      return\n    }\n\n    if (Array.isArray(this.$options.remember)) {\n      this.$options.remember = { data: this.$options.remember }\n    }\n\n    if (typeof this.$options.remember === 'string') {\n      this.$options.remember = { data: [this.$options.remember] }\n    }\n\n    if (typeof this.$options.remember.data === 'string') {\n      this.$options.remember = { data: [this.$options.remember.data] }\n    }\n\n    const stateKey = this.$options.remember.key instanceof Function\n      ? this.$options.remember.key()\n      : this.$options.remember.key\n\n    const restored = Inertia.restore(stateKey)\n\n    this.$options.remember.data.forEach(key => {\n      if (restored !== undefined && restored[key] !== undefined) {\n        this[key] = restored[key]\n      }\n\n      this.$watch(key, () => {\n        Inertia.remember(\n          this.$options.remember.data.reduce((data, key) => ({ ...data, [key]: this[key] }), {}),\n          stateKey\n        )\n      }, { immediate: true, deep: true })\n    })\n  },\n}\n","import { Inertia } from '@inertiajs/inertia'\nimport Link from './link'\nimport Remember from './remember'\n\nlet app = {}\n\nexport default {\n  name: 'Inertia',\n  props: {\n    initialPage: {\n      type: Object,\n      required: true,\n    },\n    resolveComponent: {\n      type: Function,\n      required: true,\n    },\n    transformProps: {\n      type: Function,\n      default: props => props,\n    },\n  },\n  data() {\n    return {\n      component: null,\n      props: {},\n      key: null,\n    }\n  },\n  created() {\n    app = this\n    Inertia.init({\n      initialPage: this.initialPage,\n      resolveComponent: this.resolveComponent,\n      updatePage: async (component, props, { preserveState }) => {\n        this.component = component\n        this.props = this.transformProps(props)\n        this.key = preserveState ? this.key : Date.now()\n      },\n    })\n  },\n  render(h) {\n    if (this.component) {\n      const child = h(this.component, {\n        key: this.key,\n        props: this.props,\n        scopedSlots: this.$scopedSlots,\n      })\n\n      if (this.component.layout) {\n        if (typeof this.component.layout === 'function') {\n          return this.component.layout(h, child)\n        } else if (Array.isArray(this.component.layout)) {\n          return this.component.layout\n            .concat(child)\n            .reverse()\n            .reduce((child, layout) => h(layout, [child]))\n        }\n\n        return h(this.component.layout, [child])\n      }\n\n      return child\n    }\n  },\n  install(Vue) {\n    Object.defineProperty(Vue.prototype, '$inertia', { get: () => Inertia })\n    Object.defineProperty(Vue.prototype, '$page', { get: () => app.props })\n    Vue.mixin(Remember)\n    Vue.component('InertiaLink', Link)\n  },\n}\n"],"names":["functional","props","data","type","Object","default","href","String","required","method","replace","Boolean","preserveScroll","preserveState","only","Array","headers","render","h","children","attrs","on","click","event","shouldIntercept","preventDefault","Inertia","visit","created","this","$options","remember","isArray","stateKey","key","Function","restored","restore","forEach","undefined","_this","$watch","reduce","immediate","deep","app","name","initialPage","resolveComponent","transformProps","component","init","updatePage","Date","now","child","scopedSlots","$scopedSlots","layout","concat","reverse","install","Vue","defineProperty","prototype","get","mixin","Remember","Link"],"mappings":"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"}